<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸ªäººä¸»é¡µ</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <canvas class="vh-bg"></canvas>
    
    <div class="content">
        <div class="main-container">
            <div class="left-section">
                <img src="Assests/å¤´åƒ.png" alt="å¤´åƒ" class="avatar">
            </div>
            <div class="center-section">
                <div class="intro">
                    <div class="welcome">ä½ å¥½, æˆ‘æ˜¯ <span class="gradientText">Sharon</span></div>
                    <div class="intro">
                        <p id="daily-sentence">æ¯æ—¥ä¸€è¨€</p>
                    </div>
                    <div id="time-greeting">
                        <div id="current-time"></div>
                        <div id="greeting"></div>
                    </div>
                </div>

                <div class="music-player">
                    <audio id="audio-player" src="Assests/ã€æ”¹ç¼–ç‰ˆã€‘His theme.mp3"></audio>
                    <button id="play-pause" class="play-pause-btn">æ’­æ”¾</button>
                    
                    <div class="volume-control">
                        <button id="volume-btn" class="volume-btn">ğŸ”Š</button>
                        <input id="volume-slider" type="range" min="0" max="1" step="0.01" value="1" class="volume-slider">
                    </div>
                </div>                

                <div class="links">
                    <a href="https://space.bilibili.com/85363357" target="_blank" class="styled-btn">Bilibili</a>
                    <a href="tools.html" target="_blank" class="styled-btn">å·¥å…·ç«™</a>
                </div>
            </div>
            <div class="new-right-section">
                <div id="today-weather" class="weather-container">
                    <h3>ä»Šæ—¥å¤©æ°”</h3>
                    <div id="weather-info">
                        <p>åŠ è½½ä¸­...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        function updateTimeAndGreeting() {
            const timeElement = document.getElementById('current-time');
            const greetingElement = document.getElementById('greeting');

            const now = new Date();
            const hours = now.getHours();
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');

            timeElement.textContent = `${hours}:${minutes}:${seconds}`;

            let greeting = '';
            if (hours >= 6 && hours < 12) {
                greeting = "*è¿™æ˜¯æ–°çš„ä¸€å¤©ï¼Œä½ å……æ»¡äº†å¸Œæœ›";
            } else if (hours >= 12 && hours < 18) {
                greeting = "*è¿‡äº†ä¸€ä¸ªä¸Šåˆäº†ï¼Œä½ å……æ»¡äº†ä¿¡å¿ƒ";
            } else if (hours >= 18 && hours < 24) {
                greeting = "*ç°åœ¨æ˜¯æ™šä¸Šäº†ï¼Œä½ å……æ»¡äº†å¿«ä¹";
            } else {
                greeting = "*ç°åœ¨æ˜¯æ·±å¤œäº†ï¼Œæˆ‘çš„æœ‹å‹ï¼Œæ­å–œä½ åº¦è¿‡äº†ä¸€å¤©";
            }

            greetingElement.textContent = greeting;
        }

        const beautifulSentences = [
            "æ¯ä¸ªäººï¼Œéƒ½æ˜¯ä¸€é¢—æ˜äº®çš„æ˜Ÿæ˜Ÿï¼Œç‚¹ç¼€è¿™æ¼«é•¿çš„å¤œï¼Œæµ©ç€šæ˜Ÿç©ºã€‚",
            "é€å»ä¹‹äººæ°¸è¿œåœ¨ï¼Œåªæ˜¯åŒ–ä¸ºå¤©ä¸Šçš„æ˜Ÿæ˜Ÿè€Œå·²ã€‚",
            "It matters not what someone is born,but what they grow to be. â€”â€”Dumbledore",
            "It is our choices,that show what we really are,far more than our abilities. â€”â€”Dumbledore",
            "-After all this Time? -Always.",
            "å‹‡æ•¢å¹¶ä¸æ˜¯ä¸€ä¸ªäººæ‰‹ä¸­æ‹¿ç€æªï¼Œè€Œæ˜¯åœ¨ä½ åŠ¨æ‰‹ä¹‹å‰ä½ å·²ç»çŸ¥é“è‡ªå·±ä¼šè¾“ï¼Œä½†ä¾ç„¶ä¼šåŠ¨æ‰‹ï¼Œè€Œä¸”æ— è®ºå¦‚ä½•ä¼šåšæŒåˆ°åº•ã€‚",
            "Happiness can be found, even in the darkest of times, if one only remembers to turn on the light. â€”â€”Dumbledore",
            "It takes a great deal of bravery to stand up to our enemies, but just as much to stand up to our friends. â€”â€”Dumbledore",
            "To the well-organized mind, death is but the next great adventure. â€”â€”Dumbledore",
            "Things we lose have a way of coming back to us in the end, if not always in the way we expect. â€”â€”Luna Lovegood",
            "You sort of start thinking anythingâ€™s possible if youâ€™ve got enough nerve. â€”â€”Ginny Weasley",
            "We must all face the choice between what is right and what is easy. â€”â€”Dumbledore",
            "I must not fear. Fear is the mind-killer. Fear is the little-death that brings total obliteration. â€”â€”Frank Herbert, Duneã€Šæ²™ä¸˜ã€‹",
            "Thus we never see the true state of our condition till it is illustrated to us by its contraries, nor know how to value what we enjoy, but by the want of it. â€”â€”Daniel Defoe, Robinson Crusoeã€Šé²æ»¨é€Šæ¼‚æµè®°ã€‹"
        ];

        window.onload = function() {
            const randomSentence = beautifulSentences[Math.floor(Math.random() * beautifulSentences.length)];
            const dailySentenceElement = document.getElementById('daily-sentence');
            dailySentenceElement.textContent = randomSentence;

            updateTimeAndGreeting();
            setInterval(updateTimeAndGreeting, 1000);

            const audioPlayer = document.getElementById('audio-player');
            const playPauseBtn = document.getElementById('play-pause');
            const volumeSlider = document.getElementById('volume-slider');

            playPauseBtn.addEventListener('click', function() {
                if (audioPlayer.paused) {
                    audioPlayer.play();
                    playPauseBtn.textContent = 'æš‚åœ';
                } else {
                    audioPlayer.pause();
                    playPauseBtn.textContent = 'æ’­æ”¾';
                }
            });

            volumeSlider.addEventListener('input', function() {
                audioPlayer.volume = volumeSlider.value;
            });

            async function fetchUserInfo() {
                try {
                    const userInfoResponse = await fetch('https://api.vvhan.com/api/visitor.info');
                    const userInfo = await userInfoResponse.json();
                    
                    if (userInfo.success) {
                        fetchWeather(userInfo.ip);
                    } else {
                        document.getElementById('weather-info').innerHTML = '<p>è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥</p>';
                    }
                } catch (error) {
                    console.error('è·å–ç”¨æˆ·ä¿¡æ¯æ—¶å‡ºé”™:', error);
                    document.getElementById('weather-info').innerHTML = '<p>è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥</p>';
                }
            }

            async function fetchWeather(ip) {
                try {
                    const weatherResponse = await fetch(`https://api.vvhan.com/api/weather?ip=${ip}`);
                    const weatherData = await weatherResponse.json();

                    if (weatherData.success) {
                        displayWeather(weatherData);
                    } else {
                        document.getElementById('weather-info').innerHTML = '<p>è·å–å¤©æ°”ä¿¡æ¯å¤±è´¥</p>';
                    }
                } catch (error) {
                    console.error('è·å–å¤©æ°”ä¿¡æ¯æ—¶å‡ºé”™:', error);
                    document.getElementById('weather-info').innerHTML = '<p>è·å–å¤©æ°”ä¿¡æ¯å¤±è´¥</p>';
                }
            }

            function displayWeather(weatherData) {
                const weatherInfo = document.getElementById('weather-info');
                const data = weatherData.data;
                const air = weatherData.air;

                weatherInfo.innerHTML = `
                    <p><strong>å¤©æ°”ï¼š</strong> ${data.type}</p>
                    <p><strong>æ¸©åº¦ï¼š</strong> ${data.low} ~ ${data.high}</p>
                    <p><strong>é£å‘ï¼š</strong> ${data.fengxiang} (${data.fengli})</p>
                    <p class="weather-detail"><strong>å¤œé—´å¤©æ°”ï¼š</strong> ${data.night.type}, ${data.night.fengxiang} (${data.night.fengli})</p>
                `;
            }
            fetchUserInfo();
        };
    </script>
</body>
</html>
